<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒì¼ ê°•í™”: ì¸ìƒì—­ì „</title>
    <style>
        body { font-family: 'Pretendard', sans-serif; background-color: #1a1a1a; color: #ffffff; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; overflow: hidden; touch-action: manipulation; }
        .container { text-align: center; width: 100%; max-width: 400px; padding: 20px; }
        
        h1 { font-size: 1.2rem; color: #ffeb3b; opacity: 0.9; }
        
        /* ë ˆë²¨ í‘œì‹œ: ì„¬ê´‘ ëŒ€ì‹  ë¶€ë“œëŸ¬ìš´ ìƒ‰ìƒ ë³€í™” */
        .level-box { font-size: 5.5rem; font-weight: 900; margin: 15px 0; transition: color 0.3s, transform 0.2s; }
        .rank-normal { color: #fff; }
        .rank-danger { color: #ffca28; }
        .rank-hardcore { color: #ff5252; }

        .reward-box { background: #2a2a2a; padding: 20px; border-radius: 15px; margin-bottom: 20px; border: 1px solid #3d3d3d; }
        .reward-text { font-size: 1.3rem; font-weight: bold; }

        .info-panel { display: flex; justify-content: space-between; margin-bottom: 25px; }
        .info-item { background: #252525; padding: 12px; border-radius: 10px; width: 46%; border: 1px solid #333; }
        .label { font-size: 0.75rem; color: #888; display: block; margin-bottom: 5px; }
        .val { font-size: 1.1rem; font-weight: bold; }
        .val-destruct { color: #ff5252; }

        .btn-enhance { 
            background: #444; border: 1px solid #555; width: 100%; padding: 20px; font-size: 1.5rem; 
            font-weight: bold; color: white; border-radius: 12px; cursor: pointer; transition: 0.2s;
        }
        /* ê°•í™” ì‹œë„ ì‹œ ë²„íŠ¼ ìƒ‰ìƒë§Œ ì‚´ì§ ë³€ê²½ */
        .btn-enhance:active { background: #555; transform: scale(0.98); }
        .btn-enhance:disabled { opacity: 0.3; cursor: not-allowed; }

        /* ë¶€ë“œëŸ¬ìš´ ì§„ë™ íš¨ê³¼ (ëˆˆ ì•ˆ ì•„í””) */
        .vibrate { animation: vibrate 0.3s linear; }
        @keyframes vibrate {
            0% { transform: translate(0); }
            20% { transform: translate(-3px, 2px); }
            40% { transform: translate(-3px, -2px); }
            60% { transform: translate(3px, 2px); }
            80% { transform: translate(3px, -2px); }
            100% { transform: translate(0); }
        }

        /* íŒŒê´´ ì‹œ ì—°ì¶œ: ë¹¨ê°„ ê¹œë¹¡ì„ ëŒ€ì‹  ê¸€ìê°€ ì ì‹œ íˆ¬ëª…í•´ì¡Œë‹¤ê°€ ë‚˜íƒ€ë‚¨ */
        .destroy-anim { animation: fade-out-in 0.5s ease; }
        @keyframes fade-out-in {
            0% { opacity: 1; color: #ff5252; }
            50% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; color: #fff; }
        }

        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ‚ ìƒì¼ ê°•í™” ë„ì „</h1>
        <div class="level-box rank-normal" id="levelDisplay">+0</div>
        
        <div class="reward-box">
            <div class="reward-text" id="rewardDisplay">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        </div>

        <div class="info-panel">
            <div class="info-item">
                <span class="label">ì„±ê³µ í™•ë¥ </span>
                <span class="val" id="probSuccess">--%</span>
            </div>
            <div class="info-item">
                <span class="label">íŒŒê´´ í™•ë¥ </span>
                <span class="val val-destruct" id="probDestruct">--%</span>
            </div>
        </div>

        <button class="btn-enhance" id="btnEnhance" onclick="tryEnhance()">ê°•í™” ì‹œë„ ğŸ”¨</button>
        <p id="statusMsg" style="margin-top:20px; font-size:0.85rem; color:#888;">ì‹¤íŒ¨ ì‹œ ìœ ì§€, íŒŒê´´ ì‹œ 0ê°• ì´ˆê¸°í™” (ìë™ ì €ì¥ë¨)</p>
    </div>

    <div class="modal" id="successModal">
        <h2 style="color:#ffeb3b; font-size:2.5rem;">ğŸ‘‘ ì „ì„¤ ë‹¬ì„± ğŸ‘‘</h2>
        <p id="finalContent" style="padding:20px; line-height:1.6;">ì§„ì§œ ì„ ë¬¼ì„ í™•ì¸í•˜ì„¸ìš”!</p>
    </div>

    <script>
        let currentLevel = parseInt(localStorage.getItem('birthdayLevel')) || 0;
        const rewards = ["ì‹œì‘ ì „", "ê³µê¸° 1íšŒ", "ë°•ìˆ˜ 3íšŒ", "ì•…ìˆ˜ 1íšŒ", "í•˜ì´íŒŒì´ë¸Œ 5íšŒ", "ë¬¼ í•œ ì»µ", "ì¶”íŒŒì¶¥ìŠ¤", "ê³¼ì 1ê°œ", "ì•„ì´ìŠ¤í¬ë¦¼", "í¸ì˜ì  1ì²œì›", "ìŠ¤íƒ€ë²…ìŠ¤", "í¸ì˜ì  2ì²œì›", "ë°°ë‹¬ 3ì²œì›", "ì¹˜í‚¨ ì‚¬ì´ë“œ", "3ì²œì› ì†¡ê¸ˆ", "4ì²œì› ì†¡ê¸ˆ", "4.5ì²œì› ì†¡ê¸ˆ", "í•˜ë£¨ ì‹¬ë¶€ë¦„", "ğŸ’° 5,000ì›", "ğŸ”¥ 10,000ì›", "ğŸ‘‘ ë°˜ì „ ë³´ìƒ"];

        function getProbabilities(level) {
            let success = Math.max(100 - (level * 5), 5);
            let destruct = 0;
            if (level >= 5 && level < 10) destruct = 5;
            else if (level >= 10 && level < 15) destruct = 15;
            else if (level >= 15) destruct = 25;
            else if (level >= 18) destruct = 35;
            return { success, destruct };
        }

        function updateUI() {
            const levelEl = document.getElementById('levelDisplay');
            levelEl.innerText = `+${currentLevel}`;
            document.getElementById('rewardDisplay').innerText = rewards[currentLevel];
            
            const { success, destruct } = getProbabilities(currentLevel);
            document.getElementById('probSuccess').innerText = `${success}%`;
            document.getElementById('probDestruct').innerText = `${destruct}%`;

            levelEl.className = 'level-box';
            if (destruct >= 30) levelEl.classList.add('rank-hardcore');
            else if (destruct >= 10) levelEl.classList.add('rank-danger');
            else levelEl.classList.add('rank-normal');

            if (currentLevel >= 20) {
                document.getElementById('successModal').style.display = 'flex';
            }
            localStorage.setItem('birthdayLevel', currentLevel);
        }

        function tryEnhance() {
            const btn = document.getElementById('btnEnhance');
            const levelEl = document.getElementById('levelDisplay');
            const statusMsg = document.getElementById('statusMsg');
            
            btn.disabled = true;
            statusMsg.innerText = "ê°•í™” ì‹œë„ ì¤‘...";
            levelEl.classList.remove('vibrate', 'destroy-anim');

            setTimeout(() => {
                const { success, destruct } = getProbabilities(currentLevel);
                const rand = Math.random() * 100;

                if (rand <= success) {
                    currentLevel++;
                    statusMsg.innerText = "ê°•í™” ì„±ê³µ! ğŸ‰";
                    statusMsg.style.color = "#81c784";
                } else if (rand <= (success + destruct)) {
                    // íŒŒê´´: ëˆˆ ì•„í”ˆ í”Œë˜ì‹œ ëŒ€ì‹  ê¸€ìê°€ ì‚¬ë¼ì¡Œë‹¤ ë‚˜íƒ€ë‚˜ëŠ” íš¨ê³¼
                    currentLevel = 0;
                    levelEl.classList.add('destroy-anim');
                    statusMsg.innerText = "íŒŒê´´ë˜ì—ˆìŠµë‹ˆë‹¤. (0ê°• ì´ˆê¸°í™”) ğŸ’€";
                    statusMsg.style.color = "#e57373";
                } else {
                    // ì‹¤íŒ¨: ê°€ë²¼ìš´ ì§„ë™ë§Œ
                    levelEl.classList.add('vibrate');
                    statusMsg.innerText = "ì‹¤íŒ¨! ë‹¤í–‰íˆ ë ˆë²¨ì´ ìœ ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ğŸ›¡ï¸";
                    statusMsg.style.color = "#9e9e9e";
                }

                updateUI();
                btn.disabled = false;
            }, 600);
        }

        updateUI();
    </script>
</body>
</html>

